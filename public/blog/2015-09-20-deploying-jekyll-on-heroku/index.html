<!DOCTYPE html>
<html lang="en-gb">

    <head>
        <title> Deploying Jekyll on Heroku &middot; Claire Parker-Jones Blog </title>

        <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<meta name="generator" content="Hugo 0.37" />

<link rel="stylesheet" href="http://example.org/css/styles.css">

<script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>

<link rel="icon" type="image/png" sizes="32x32" href="http://example.org/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="http://example.org/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="http://example.org/favicon/favicon-16x16.png">

<meta name="theme-color" content="#4527a0">

        <link rel="stylesheet" href="http://example.org/css/prism.css"/>
    </head>

    <body>
        <header class="c-header">
    <div class="c-header__container">
        <h1 class="c-header__title">Claire<br />Parker-Jones</h1>
        <nav class="c-header__links-container">
            <ul class="c-header__links-list">
                <li class="c-header__nav-item">
                    <a class="c-header__link" href="http://example.org/">Home</a>
                </li>
                
                <li class="c-header__nav-item">
                    <a class="c-header__link" href="/about">About</a>
                </li>
                
                <li class="c-header__nav-item">
                    <a class="c-header__link" href="/interesting">Interesting</a>
                </li>
                
                <li class="c-header__nav-item">
                    <a class="c-header__link" href="/blog">Blog</a>
                </li>
                

            </ul>
        </nav>
    </div>
</header>

        <main role="main">
            <div class="o-main__wrapper c-post">
                <h1 class="c-post__title">Deploying Jekyll on Heroku</h1>
                <h3 class="post-date"><i class="far fa-calendar-alt"></i>&nbsp;&nbsp;20 September 2015 </h3>
                <div class="reading-time"><i class="far fa-clock"></i>&nbsp;&nbsp;4 minute read</div>
                
                    <div class="c-post__categories"><i class="fas fa-book"></i>&nbsp;&nbsp;Categories:&nbsp;
    
    <span class="c-post__category">/ruby </span>
    
    <span class="c-post__category">/heroku </span>
    
</div>

                
                <div class="post-content">
                    

<h1 id="how-i-deployed-my-jekyll-blog-to-heroku-step-by-step">How I deployed my Jekyll blog to Heroku step-by-step</h1>

<p>If you use Jekyll for your blog you&rsquo;ll see that their docs suggest hosting your app on GitHub pages. However, I wanted to host mine on Heroku because - well, just because I could really. I&rsquo;d used Heroku previously and I knew I wouldn&rsquo;t be restricted in my choice of plug-ins further down the line. Alas, I didn&rsquo;t find a single clear tutorial for setting it up: even the example linked on the Jekyll site didn&rsquo;t run for me! But as you can tell, the story had a happy ending and you are reading the fruit of my labours. üçéüçè</p>

<p>Here&rsquo;s a guide to the Hows &amp; Whys. You should be able to follow along as long as you&rsquo;re happy with the command line.</p>

<h2 id="1-make-a-jekyll-blog">1. Make a Jekyll blog</h2>

<p>Make the skeleton of a blog as per <a href="http://jekyllrb.com/docs/quickstart/">Jekyll&rsquo;s quick-start docs</a>. At your command prompt, type:</p>

<pre><code class="language-bash">gem install jekyll
jekyll new daftBlog
cd daftBlog
jekyll serve
</code></pre>

<p>You&rsquo;ve installed the Jekyll RubyGem and used it to generate a new blog called &lsquo;daftBlog&rsquo;. You&rsquo;ve gone into the new folder that Jekyll created
and asked to Jekyll to run the blog. Now if you open <code>http://localhost:4000</code> in your browser you should see Jekyll&rsquo;s Hello World blog pages.</p>

<p><em>Note:</em>  from here onwards create all the files in the root of your blog, i.e. where you should be right now in the terminal.</p>

<p>##¬†2. Turn the blog into a Rack app</p>

<p>Alas, you can&rsquo;t just add your own blog content and stick this app on Heroku and expect it to run. We need a way to make our blog work with Heroku&rsquo;s webservers, and we do this by creating a Rack app.</p>

<p>Let&rsquo;s get a Gemfile set up with all the stuff you&rsquo;ll need going forwards. Create a <code>Gemfile</code> file that includes:</p>

<pre><code class="language-ruby">source 'https://rubygems.org'
ruby '2.0.0'

gem 'bundler'
gem 'jekyll', '~&gt;2.5.3'
gem 'rack-contrib'
gem 'kramdown'
gem 'puma'
gem 'rake'
</code></pre>

<p>Run <code>bundle install</code> from the command line. As well as the Bundler and Jekyll gems, you&rsquo;ve now got a Rack gem, kramdown for parsing Markdown files (assuming your blog posts will be written in Markdown of course) and Puma for our Rack webserver.</p>

<p>We&rsquo;re using <code>rack-contrib</code> instead of <code>rack-jekyll</code> because of <a href="http://mwmanning.com/2011/12/04/Jekyll-on-Heroku-Part-2.html">this</a> website and <a href="https://jbhannah.net/blog/2013/01/16/jekyll-on-heroku-without-rack-jekyll-or-custom-buildpacks.html">this website</a> said so.</p>

<p>Next create a <code>config.ru</code> file. This tells Rack how to run your app.</p>

<pre><code class="language-ruby">require 'rack/contrib/try_static'
require 'rack/contrib/not_found'

use Rack::TryStatic,
  :root =&gt; &quot;_site&quot;,
  :urls =&gt; %w[/],
  :try  =&gt; ['index.html', '/index.html']

run Rack::NotFound.new('_site/404.html')
</code></pre>

<p>Jekyll will have already made an <code>index.html</code> file for us, but doesn&rsquo;t give a 404 automatically. Create a file called <code>404.html</code> and put some valid HTML in it - just copy the index page&rsquo;s contents if you like for now. Run <code>jekyll serve</code> to make sure this page is generated and placed in your <code>_site</code> folder. Once it&rsquo;s running locally hit <code>Ctrl-C</code> to stop it running and continue following this tutorial üòú</p>

<p>You need to put some extra stuff in the <code>_config.yml</code> file, particularly <code>vendor</code> so that Jekyll doesn&rsquo;t get confused when it generates your site and looks in the wrong place for stuff. Add this line to the bottom:</p>

<pre><code class="language-bash">exclude: ['config.ru', 'Gemfile', 'Gemfile.lock', 'vendor', 'Procfile']
</code></pre>

<p>Make a <code>Rakefile</code> and add a task that Heroku will use when building the site:</p>

<pre><code class="language-ruby">namespace :assets do
  task :precompile do
    puts `bundle exec jekyll build`
  end
end
</code></pre>

<p>Test your blog works as a Rack app: from the command line run the command <code>rackup</code> and open the result in your browser, in my case <code>localhost:9292</code>. You should see the same pages as when you did <code>jekyll serve</code> before. Congrats, you have a Rack app!</p>

<h2 id="3-get-blog-on-heroku">3. Get blog on Heroku</h2>

<p>Another file for Heroku to know how to run your app. Make a <code>Procfile</code> file and put the following in it:</p>

<pre><code class="language-yaml">web: bundle exec puma -p $PORT config.ru
</code></pre>

<p>Install Git and the <a href="https://toolbelt.heroku.com/">Heroku toolbelt</a> (wait, you don&rsquo;t have Git installed already??). Then run the following commands:</p>

<pre><code class="language-bash">git init
heroku create
git add .
git commit -m 'First commit'
git push heroku master
heroku open
</code></pre>

<p>You&rsquo;ve initialised the directory ready for Git funtimes, created a Heroku app which will also add the relevant stuff to your git config, committed your work to Git and pushed it to Heroku. All that&rsquo;s left to do is to open it from the command line like a boss and marvel in your blog&rsquo;s glory!</p>

<p>See the source code for this very blog <a href="https://github.com/claireparker/blog-com">here</a> as a working example - how meta!</p>

                </div>
                <div class="c-post__footer">
                    
                    <div><i class="fab fa-twitter" aria-hidden="true"></i>&nbsp;&nbsp;Comments? <a href="https://twitter.com/claireparkerpen">Send me a Tweet</a></div>
                    
                    <div><i class="fab fa-github" aria-hidden="true"></i>&nbsp;&nbsp;Typos? <a href="https://github.com/claireparker/hugo-blog/blob/master/content/blog/2015-09-20-deploying-jekyll-on-heroku.markdown">Edit this page on Github</a></div>
                </div>
            </div>
        </main>
        <footer class="c-footer">
    <div class="c-footer__social-container">
        <a class="c-footer__social-icon icon--github" href="https://github.com/claireparker/">
            <i class="fab fa-github" aria-hidden="true"></i>
        </a>
        <a class="c-footer__social-icon icon--codepen" href="https://codepen.io/claireparker/">
            <i class="fab fa-codepen" aria-hidden="true"></i>
        </a>
        <a class="c-footer__social-icon icon--instagram" href="https://instagram.com/claire_codes/">
            <i class="fab fa-instagram" aria-hidden="true"></i>
        </a>
        <a class="c-footer__social-icon icon--twitter" href="https://twitter.com/ClaireParkerPen/">
            <i class="fab fa-twitter" aria-hidden="true"></i>
        </a>
        <a class="c-footer__social-icon icon--linkedin" href="https://www.linkedin.com/in/claireparker2/">
            <i class="fab fa-linkedin" aria-hidden="true" aria-hidden="true"></i>
        </a>
        <a class="c-footer__social-icon icon--magento" href="https://claireparker.github.io/magento-1-frontend-bits/">
            <i class="fab fa-magento" aria-hidden="true"></i>
        </a>
    </div>
    <div>Hand-made by <a href="/about">Claire Parker-Jones</a></div>
    <div>Powered by Hugo</div>
    <div>
        &lt;/>
    </div>
</footer>

        <script src="http://example.org/js/prism.js"></script>
    </body>
